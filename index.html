<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All-in-One Study App</title>
    <style>
        /* CSS Variables */
        :root {
            --primary-color: #4f46e5;
            --primary-hover: #4338ca;
            --accent-color: #06b6d4;
            --background: #0f172a;
            --text-color: #f1f5f9;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(79, 70, 229, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(6, 182, 212, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 0%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            background-attachment: fixed;
            color: var(--text-color);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Button Styles */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .btn-stop {
            background: #ef4444;
            border: 2px solid #ef4444;
            color: white;
        }

        .btn-stop:hover {
            background: #dc2626;
            border-color: #dc2626;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(239, 68, 68, 0.3);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        /* Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 2rem;
            transition: var(--transition), opacity 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .tool-card h3 {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 0.5rem;
        }

        .tool-card p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        /* Tool Sections - Hidden by default */
        .tool-section {
            display: none;
            text-align: center;
            padding: 2rem 0;
            animation: fadeIn 0.6s ease-in-out;
        }

        .tool-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 2rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Calculator Styles */
        .calculator {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            margin: 0 auto 2rem auto;
            max-width: 400px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .calculator-display {
            margin-bottom: 1rem;
            position: relative;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 0.75rem;
            padding: 0.25rem;
            border: 2px solid rgba(79, 70, 229, 0.3);
        }

        .calculator-display input {
            width: 100%;
            padding: 1rem;
            font-size: 1.89rem;
            background: rgba(30, 41, 59, 0.9);
            border: none;
            border-radius: 0.5rem;
            text-align: right;
            color: #f1f5f9;
            font-weight: 700;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
            min-height: 60px;
            line-height: 1.2;
        }

        .calculator-mode {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            gap: 0.5rem;
        }

        .mode-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.25rem;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .mode-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .mode-separator {
            color: rgba(255, 255, 255, 0.5);
            font-weight: 300;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }

        .calc-btn {
            padding: 0.8rem;
            font-size: 1rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            min-height: 50px;
        }

        .calc-btn.zero-btn {
            grid-column: span 2;
            text-align: left;
            padding-left: 1.5rem;
        }

        .calc-btn.number {
            background: rgba(255, 255, 255, 0.95);
            color: #2d3748;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .calc-btn.number:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .calc-btn.operator {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .calc-btn.operator:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
        }

        .calc-btn.equals {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 2px 8px rgba(240, 147, 251, 0.3);
        }

        .calc-btn.equals:hover {
            background: #e879f9;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(240, 147, 251, 0.4);
        }

        .calc-btn.clear {
            background: #ef4444;
            color: white;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .calc-btn.clear:hover {
            background: #dc2626;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(239, 68, 68, 0.4);
        }

        /* Notepad Styles */
        .notepad-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .notepad {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .notepad-toolbar {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        #notepadText {
            width: 100%;
            min-height: 400px;
            padding: 1rem;
            font-size: 1rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 0.5rem;
            resize: vertical;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #f1f5f9;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        #notepadText::placeholder {
            color: rgba(241, 245, 249, 0.6);
        }

        #notepadText:focus {
            outline: none;
            border-color: rgba(79, 70, 229, 0.6);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .saved-files-panel {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            text-align: left;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .saved-files-panel h3 {
            color: white;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .saved-files-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .saved-file-item {
            background: rgba(30, 41, 59, 0.6);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(79, 70, 229, 0.2);
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .saved-file-item:hover {
            transform: translateY(-2px);
            background: rgba(30, 41, 59, 0.8);
            border-color: rgba(79, 70, 229, 0.4);
            box-shadow: 0 8px 25px rgba(79, 70, 229, 0.2);
        }

        .file-info strong {
            color: white;
            display: block;
            font-size: 1rem;
        }

        .file-info small {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
        }

        .no-files {
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            font-style: italic;
        }

        /* Timer Styles */
        .timer-container {
            max-width: 500px;
            margin: 0 auto;
        }

        .timer-tabs {
            display: flex;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.5rem;
            padding: 0.25rem;
        }

        .timer-tab {
            flex: 1;
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 0.25rem;
            transition: var(--transition);
        }

        .timer-tab.active {
            background: var(--primary-color);
            color: white;
        }

        .timer-display, .stopwatch-display {
            font-size: 4rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 2rem;
            font-family: 'Monaco', 'Menlo', monospace;
            background: rgba(30, 41, 59, 0.8);
            padding: 1rem;
            border-radius: 1rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .timer-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .timer-input input {
            width: 70px;
            padding: 0.5rem;
            font-size: 1.5rem;
            text-align: center;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 0.5rem;
            color: #f1f5f9;
            backdrop-filter: blur(10px);
        }

        .timer-input span {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .timer-controls, .stopwatch-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .lap-times {
            margin-top: 2rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .lap-time {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 0.5rem;
            border-radius: 0.5rem;
        }

        /* Tool Controls */
        .tool-controls {
            text-align: center;
            margin-top: 2rem;
        }

        /* Study Simulations Styles */
        .simulations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .simulation-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            padding: 1.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            transition: var(--transition);
            cursor: pointer;
        }

        .simulation-card:hover {
            transform: translateY(-5px);
            border-color: rgba(79, 70, 229, 0.6);
            box-shadow: 0 10px 40px rgba(79, 70, 229, 0.2);
        }

        .simulation-card h3 {
            color: #f1f5f9;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .simulation-card p {
            color: rgba(241, 245, 249, 0.8);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .simulation-content {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            color: #f1f5f9;
        }

        /* Diagonal Scales Simulation Styles */
        /* Simulations Grid Styles */
        .simulations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .simulation-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 15px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .simulation-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
            border-color: rgba(59, 130, 246, 0.4);
        }

        .simulation-card h3 {
            margin: 0 0 1rem 0;
            color: #e2e8f0;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .simulation-card p {
            color: rgba(241, 245, 249, 0.8);
            margin-bottom: 1.5rem;
            font-size: 1rem;
            line-height: 1.5;
        }

        .simulation-content {
            color: rgba(241, 245, 249, 0.7);
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .simulation-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #9333ea);
        }

        .diagonal-scales-container {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            margin-bottom: 2rem;
        }

        .scale-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .control-group {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
        }

        .control-group h4 {
            color: #f1f5f9;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .input-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            align-items: center;
        }

        .input-row label {
            color: rgba(241, 245, 249, 0.8);
            min-width: 120px;
            font-size: 0.9rem;
        }

        .input-row input, .input-row select {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 0.25rem;
            background: rgba(30, 41, 59, 0.9);
            color: #f1f5f9;
            font-size: 0.9rem;
        }

        .scale-canvas-container {
            background: #ffffff;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 2rem 0;
            border: 2px solid rgba(79, 70, 229, 0.3);
            overflow: auto;
        }

        .scale-canvas {
            width: 100%;
            min-height: 400px;
            border: 1px solid #ddd;
            cursor: crosshair;
        }

        .scale-info {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            margin-top: 1rem;
        }

        .scale-info h4 {
            color: #f1f5f9;
            margin-bottom: 1rem;
        }

        .scale-info p {
            color: rgba(241, 245, 249, 0.8);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .measurement-display {
            background: rgba(79, 70, 229, 0.2);
            border-radius: 0.25rem;
            padding: 0.5rem;
            margin-top: 1rem;
            color: #f1f5f9;
            font-weight: bold;
            text-align: center;
        }

        /* Lectures Styles */
        /* Lecture Interface Styles */
        .add-lecture-section {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .add-lecture-section h3 {
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .lecture-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            color: #f1f5f9;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 0.5rem;
            padding: 0.75rem;
            color: #f1f5f9;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.6);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-start;
            margin-top: 1rem;
        }

        .lectures-display-section {
            margin-top: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .section-header h3 {
            color: #f1f5f9;
            margin: 0;
        }

        .lecture-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .lecture-controls input,
        .lecture-controls select {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            color: #f1f5f9;
            font-size: 0.9rem;
        }

        .lectures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .lecture-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            padding: 2rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
            transition: var(--transition);
            position: relative;
        }

        .lecture-card:hover {
            transform: translateY(-3px);
            border-color: rgba(6, 182, 212, 0.6);
            box-shadow: 0 8px 32px rgba(6, 182, 212, 0.2);
        }

        .lecture-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .lecture-icon {
            font-size: 2.5rem;
        }

        .lecture-info h3 {
            color: #f1f5f9;
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }

        .lecture-info .subject {
            color: rgba(6, 182, 212, 0.9);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .lecture-description {
            color: rgba(241, 245, 249, 0.8);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .lecture-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .detail-item {
            background: rgba(30, 41, 59, 0.6);
            padding: 0.75rem;
            border-radius: 0.5rem;
            text-align: center;
            border: 1px solid rgba(6, 182, 212, 0.2);
        }

        .detail-item .label {
            color: rgba(241, 245, 249, 0.7);
            font-size: 0.8rem;
            margin-bottom: 0.25rem;
        }

        .detail-item .value {
            color: #f1f5f9;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .lecture-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .delete-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: rgba(239, 68, 68, 0.3);
            color: #f1f5f9;
        }

        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(241, 245, 249, 0.6);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-state h4 {
            color: #f1f5f9;
            margin-bottom: 0.5rem;
        }

        /* Video Modal Styles */
        .video-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal-content {
            background: rgba(15, 23, 42, 0.95);
            border-radius: 1rem;
            max-width: 90%;
            max-height: 90%;
            width: 1000px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            overflow: hidden;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }

        .modal-header h3 {
            color: #f1f5f9;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            color: #f1f5f9;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .modal-body {
            padding: 1.5rem;
        }

        #videoPlayerContainer {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        #videoPlayerContainer iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 0.5rem;
        }

        .lecture-info {
            color: rgba(241, 245, 249, 0.8);
            line-height: 1.6;
        }

        .btn-secondary {
            background: rgba(6, 182, 212, 0.2);
            color: #06b6d4;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(6, 182, 212, 0.3);
            color: #f1f5f9;
            border-color: rgba(6, 182, 212, 0.6);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .lecture-controls {
                flex-direction: column;
            }
        }

        /* Study Material Styles */
        .study-material-grid {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        .material-category {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 20px;
            padding: 2rem;
        }

        .material-category h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #f1f5f9;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .material-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
        }

        .material-item {
            background: rgba(51, 65, 85, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .material-item:hover {
            transform: translateY(-5px);
            border-color: rgba(99, 102, 241, 0.5);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .material-header {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .material-icon {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(99, 102, 241, 0.2);
            border-radius: 12px;
            flex-shrink: 0;
        }

        .material-info h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: #f1f5f9;
        }

        .material-meta {
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .material-description {
            color: #cbd5e1;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .material-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
        }

        .material-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tools-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .notepad-container {
                grid-template-columns: 1fr;
            }

            .calculator {
                max-width: 100%;
            }

            .timer-display, .stopwatch-display {
                font-size: 2.5rem;
            }

            .timer-input input {
                width: 60px;
                font-size: 1.2rem;
            }

            .simulations-grid {
                grid-template-columns: 1fr;
            }

            .lectures-grid {
                grid-template-columns: 1fr;
            }

            .lecture-details {
                grid-template-columns: repeat(2, 1fr);
            }

            .lecture-actions {
                flex-direction: column;
            }
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #10b981;
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.warning {
            background: #f59e0b;
        }

        .notification.info {
            background: #3b82f6;
        }

        /* Search Bar Styles */
        .search-container {
            position: relative;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-bar {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            font-size: 1.1rem;
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid rgba(79, 70, 229, 0.3);
            border-radius: 2rem;
            color: #f1f5f9;
            backdrop-filter: blur(20px);
            transition: var(--transition);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            cursor: text;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .search-bar:focus {
            outline: none;
            border-color: rgba(79, 70, 229, 0.6);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1), 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .search-bar::placeholder {
            color: rgba(241, 245, 249, 0.5);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(241, 245, 249, 0.5);
            font-size: 1.2rem;
            pointer-events: none;
        }

        .search-shortcut {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(241, 245, 249, 0.5);
            font-size: 0.8rem;
            background: rgba(30, 41, 59, 0.6);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            border: 1px solid rgba(79, 70, 229, 0.3);
            pointer-events: none;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 1rem;
            margin-top: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }

        .search-result-item {
            padding: 1rem;
            border-bottom: 1px solid rgba(79, 70, 229, 0.2);
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: rgba(79, 70, 229, 0.2);
        }

        .search-result-title {
            color: #f1f5f9;
            font-weight: 600;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-result-description {
            color: rgba(241, 245, 249, 0.7);
            font-size: 0.9rem;
        }

        .search-result-type {
            color: rgba(79, 70, 229, 0.8);
            font-size: 0.8rem;
            background: rgba(79, 70, 229, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            margin-left: auto;
        }

        .no-results {
            padding: 2rem;
            text-align: center;
            color: rgba(241, 245, 249, 0.6);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #10b981;
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.warning {
            background: #f59e0b;
        }

        .notification.info {
            background: #3b82f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>All-in-One Study App</h1>
            <p>Your complete toolkit for studying and productivity</p>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-icon">üîç</div>
            <input type="text" class="search-bar" id="search-input" placeholder="Search tools, simulations, lectures... (Ctrl+K)" autocomplete="off" spellcheck="false">
            <div class="search-shortcut">Ctrl+K</div>
            <div class="search-results" id="searchResults"></div>
        </div>

        <!-- Main Tools Grid -->
        <div id="toolsGrid" class="tools-grid">
            <div class="tool-card" onclick="showTool('calculator')">
                <div class="tool-icon">üßÆ</div>
                <h3>Calculator</h3>
                <p>Basic and scientific calculator</p>
                <button class="btn btn-primary">Use Calculator</button>
            </div>
            <div class="tool-card" onclick="showTool('notepad')">
                <div class="tool-icon">üìù</div>
                <h3>Notepad</h3>
                <p>Simple text editor and notes</p>
                <button class="btn btn-primary">Open Notepad</button>
            </div>
            <div class="tool-card" onclick="showTool('timer')">
                <div class="tool-icon">‚è±Ô∏è</div>
                <h3>Timer</h3>
                <p>Countdown timer and stopwatch</p>
                <button class="btn btn-primary">Open Timer</button>
            </div>
            <div class="tool-card" onclick="showTool('simulations')">
                <div class="tool-icon">üó£Ô∏è</div>
                <h3>Study Simulations</h3>
                <p>Interactive learning simulations</p>
                <button class="btn btn-primary">View Simulations</button>
            </div>
            <div class="tool-card" onclick="showTool('lectures')">
                <div class="tool-icon">üéì</div>
                <h3>Lectures</h3>
                <p>Educational content and courses</p>
                <button class="btn btn-primary">Browse Lectures</button>
            </div>
            <div class="tool-card" onclick="showTool('study-material')">
                <div class="tool-icon">üìö</div>
                <h3>Study Material</h3>
                <p>PYQs, assignments, and study resources</p>
                <button class="btn btn-primary">Browse Materials</button>
            </div>
        </div>

        <!-- Calculator Tool -->
        <div id="calculatorTool" class="tool-section">
            <h2>Calculator</h2>
            <div class="calculator">
                <div class="calculator-display">
                    <input type="text" id="calculatorInput" readonly value="0">
                </div>
                <div class="calculator-mode">
                    <button class="mode-btn active" id="degreeMode" onclick="toggleAngleMode()">DEG</button>
                    <span class="mode-separator">|</span>
                    <button class="mode-btn" id="radianMode" onclick="toggleAngleMode()">RAD</button>
                </div>
                <div class="calculator-buttons">
                    <button class="calc-btn clear" onclick="clearCalculator()">C</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('(')">(</button>
                    <button class="calc-btn operator" onclick="appendToCalculator(')')">)</button>
                    <button class="calc-btn operator" onclick="deleteLastCalculator()">‚å´</button>
                    
                    <button class="calc-btn operator" onclick="appendTrigFunction('sin')">sin</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('cos')">cos</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('tan')">tan</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('‚àö')">‚àö</button>
                    
                    <button class="calc-btn operator" onclick="appendTrigFunction('asin')">sin‚Åª¬π</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('acos')">cos‚Åª¬π</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('atan')">tan‚Åª¬π</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('log(')">log</button>
                    
                    <button class="calc-btn operator" onclick="appendTrigFunction('sec')">sec</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('csc')">csc</button>
                    <button class="calc-btn operator" onclick="appendTrigFunction('cot')">cot</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('^')">^</button>
                    
                    <button class="calc-btn operator" onclick="appendToCalculator('/')">/</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('*')">√ó</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('-')">-</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('+')">+</button>
                    
                    <button class="calc-btn number" onclick="appendToCalculator('7')">7</button>
                    <button class="calc-btn number" onclick="appendToCalculator('8')">8</button>
                    <button class="calc-btn number" onclick="appendToCalculator('9')">9</button>
                    <button class="calc-btn operator" onclick="appendToCalculator('!')">!</button>
                    
                    <button class="calc-btn number" onclick="appendToCalculator('4')">4</button>
                    <button class="calc-btn number" onclick="appendToCalculator('5')">5</button>
                    <button class="calc-btn number" onclick="appendToCalculator('6')">6</button>
                    <button class="calc-btn number" onclick="appendToCalculator('.')">.</button>
                    
                    <button class="calc-btn number" onclick="appendToCalculator('1')">1</button>
                    <button class="calc-btn number" onclick="appendToCalculator('2')">2</button>
                    <button class="calc-btn number" onclick="appendToCalculator('3')">3</button>
                    <button class="calc-btn equals" onclick="calculateResult()" style="grid-row: span 2;">=</button>
                    
                    <button class="calc-btn number zero-btn" onclick="appendToCalculator('0')">0</button>
                </div>
            </div>
            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>

        <!-- Notepad Tool -->
        <div id="notepadTool" class="tool-section">
            <h2>Notepad</h2>
            <div class="notepad-container">
                <div class="notepad">
                    <div class="notepad-toolbar">
                        <button class="btn btn-small" onclick="saveNote()">üíæ Save</button>
                        <button class="btn btn-small" onclick="clearNote()">üóëÔ∏è Clear</button>
                        <button class="btn btn-small" onclick="downloadNote()">üì• Download</button>
                    </div>
                    <textarea id="notepadText" placeholder="Start typing your notes here..."></textarea>
                </div>
                <div class="saved-files-panel">
                    <h3>Saved Files</h3>
                    <div id="savedFilesList" class="saved-files-list">
                        <p class="no-files">No saved files</p>
                    </div>
                </div>
            </div>
            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>

        <!-- Timer Tool -->
        <div id="timerTool" class="tool-section">
            <h2>Timer & Stopwatch</h2>
            <div class="timer-container">
                <div class="timer-tabs">
                    <button class="timer-tab active" id="timerTab" onclick="switchTimerTab('timer')">Timer</button>
                    <button class="timer-tab" id="stopwatchTab" onclick="switchTimerTab('stopwatch')">Stopwatch</button>
                </div>
                
                <div class="timer-section" id="timerSection">
                    <div class="timer-display" id="timerDisplay">00:05:00</div>
                    <div class="timer-input">
                        <input type="number" id="timerHours" min="0" max="23" value="0" placeholder="HH">
                        <span>:</span>
                        <input type="number" id="timerMinutes" min="0" max="59" value="5" placeholder="MM">
                        <span>:</span>
                        <input type="number" id="timerSeconds" min="0" max="59" value="0" placeholder="SS">
                    </div>
                    <div class="timer-controls">
                        <button class="btn btn-primary" id="startTimer" onclick="startTimer()">Start</button>
                        <button class="btn btn-outline" id="resetTimer" onclick="resetTimer()">Reset</button>
                    </div>
                </div>
                
                <div class="stopwatch-section" id="stopwatchSection" style="display: none;">
                    <div class="stopwatch-display" id="stopwatchDisplay">00:00:00</div>
                    <div class="stopwatch-controls">
                        <button class="btn btn-primary" id="startStopwatch" onclick="startStopwatch()">Start</button>
                        <button class="btn btn-outline" onclick="lapStopwatch()">Lap</button>
                        <button class="btn btn-outline" onclick="resetStopwatch()">Reset</button>
                    </div>
                    <div class="lap-times" id="lapTimes"></div>
                </div>
            </div>
            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>

        <!-- Study Simulations Tool -->
        <div id="simulationsTool" class="tool-section">
            <h2>Study Simulations</h2>
            
            <div class="simulations-grid">
                <div class="simulation-card" onclick="openSimulation('engineering-graphics')">
                    <h3>üìê Engineering Graphics</h3>
                    <p>Interactive diagonal scales and technical drafting</p>
                    <div class="simulation-content">
                        <strong>Learn About:</strong><br>
                        ‚Ä¢ Diagonal Scale Construction<br>
                        ‚Ä¢ Precise Measurements<br>
                        ‚Ä¢ Engineering Drawings<br>
                        ‚Ä¢ Drafting Techniques
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary">Start Simulation</button>
                    </div>
                </div>

                <div class="simulation-card" onclick="openSimulation('physics')">
                    <h3>‚ö° Physics Lab</h3>
                    <p>Interactive physics experiments and demonstrations</p>
                    <div class="simulation-content">
                        <strong>Available Experiments:</strong><br>
                        ‚Ä¢ Projectile Motion<br>
                        ‚Ä¢ Wave Interference<br>
                        ‚Ä¢ Electric Fields<br>
                        ‚Ä¢ Pendulum Motion
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary">Coming Soon</button>
                    </div>
                </div>

                <div class="simulation-card" onclick="openSimulation('chemistry')">
                    <h3>üß™ Chemistry Lab</h3>
                    <p>Virtual chemical reactions and molecular modeling</p>
                    <div class="simulation-content">
                        <strong>Available Reactions:</strong><br>
                        ‚Ä¢ Acid-Base Titration<br>
                        ‚Ä¢ Molecular Bonding<br>
                        ‚Ä¢ Chemical Equilibrium<br>
                        ‚Ä¢ Periodic Trends
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary">Coming Soon</button>
                    </div>
                </div>

                <div class="simulation-card" onclick="openSimulation('math')">
                    <h3>üìä Math Visualizer</h3>
                    <p>Mathematical concepts with visual representations</p>
                    <div class="simulation-content">
                        <strong>Available Tools:</strong><br>
                        ‚Ä¢ Function Graphing<br>
                        ‚Ä¢ Geometry Proofs<br>
                        ‚Ä¢ Statistics Plots<br>
                        ‚Ä¢ Calculus Visualization
                    </div>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-primary">Coming Soon</button>
                    </div>
                </div>
            </div>

            <!-- Engineering Graphics Simulation (Initially Hidden) -->
            <div id="engineeringGraphicsSimulation" class="diagonal-scales-container" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h3>üìê Interactive Diagonal Scales Tutorial</h3>
                    <button class="btn btn-outline" onclick="showSimulationsList()">‚Üê Back to Simulations</button>
                </div>
                <p style="color: rgba(241, 245, 249, 0.8); margin-bottom: 2rem;">
                    Learn how to construct and use diagonal scales for precise measurements in engineering drawings. 
                    This interactive simulation will guide you through the principles and applications of diagonal scales.
                </p>

                <div class="scale-controls">
                    <div class="control-group">
                        <h4>Scale Parameters</h4>
                        <div class="input-row">
                            <label>Maximum Value:</label>
                            <input type="number" id="maxValue" value="100" min="10" max="1000">
                        </div>
                        <div class="input-row">
                            <label>Major Divisions:</label>
                            <input type="number" id="majorDivisions" value="10" min="5" max="20">
                        </div>
                        <div class="input-row">
                            <label>Minor Divisions:</label>
                            <input type="number" id="minorDivisions" value="10" min="5" max="20">
                        </div>
                        <div class="input-row">
                            <label>Scale Length (cm):</label>
                            <input type="number" id="scaleLength" value="15" min="10" max="25">
                        </div>
                    </div>

                    <div class="control-group">
                        <h4>Measurement Tool</h4>
                        <div class="input-row">
                            <label>Target Value:</label>
                            <input type="number" id="targetValue" value="23.7" min="0" step="0.1">
                        </div>
                        <div class="input-row">
                            <label>Scale Type:</label>
                            <select id="scaleType">
                                <option value="diagonal">Diagonal Scale</option>
                                <option value="plain">Plain Scale (Comparison)</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <label>Show Construction:</label>
                            <input type="checkbox" id="showConstruction" checked>
                        </div>
                        <button class="btn btn-primary" onclick="drawDiagonalScale()" style="margin-top: 1rem; width: 100%;">
                            üéØ Generate Scale
                        </button>
                    </div>
                </div>

                <div class="scale-canvas-container">
                    <canvas id="scaleCanvas" class="scale-canvas" width="800" height="500"></canvas>
                </div>

                <div class="measurement-display" id="measurementDisplay">
                    Click "Generate Scale" to begin the interactive tutorial
                </div>

                <div class="scale-info">
                    <h4>ÔøΩ Understanding Diagonal Scales</h4>
                    <p><strong>What is a Diagonal Scale?</strong> A diagonal scale is used when very small distances are to be measured accurately. It allows reading up to three units (e.g., meters, decimeters, centimeters).</p>
                    
                    <p><strong>Construction Principle:</strong> The scale uses diagonal lines to subdivide the smallest divisions of a plain scale, providing higher precision in measurements.</p>
                    
                    <p><strong>Applications:</strong></p>
                    <ul style="color: rgba(241, 245, 249, 0.8); margin-left: 1.5rem;">
                        <li>Precise measurements in engineering drawings</li>
                        <li>Architectural plans and blueprints</li>
                        <li>Surveying and mapping</li>
                        <li>Technical illustration and drafting</li>
                    </ul>

                    <p><strong>How to Read:</strong></p>
                    <ol style="color: rgba(241, 245, 249, 0.8); margin-left: 1.5rem;">
                        <li>Locate the major division (units)</li>
                        <li>Find the minor division (tenths)</li>
                        <li>Follow the diagonal line for hundredths</li>
                        <li>Add all three readings for the final measurement</li>
                    </ol>
                </div>

                <div class="control-group" style="margin-top: 2rem;">
                    <h4>üéì Interactive Exercises</h4>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-outline" onclick="startTutorial()" style="flex: 1; min-width: 150px;">
                            üìñ Start Tutorial
                        </button>
                        <button class="btn btn-outline" onclick="practiceMode()" style="flex: 1; min-width: 150px;">
                            üéØ Practice Mode
                        </button>
                        <button class="btn btn-outline" onclick="showExample()" style="flex: 1; min-width: 150px;">
                            üí° Show Example
                        </button>
                        <button class="btn btn-outline" onclick="resetScale()" style="flex: 1; min-width: 150px;">
                            üîÑ Reset
                        </button>
                    </div>
                </div>
            </div>

            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>

        <!-- Lectures Tool -->
        <div id="lecturesTool" class="tool-section">
            <h2>My Lecture Library</h2>
            
            <!-- Add Lecture Form -->
            <div class="add-lecture-section">
                <h3>‚ûï Add New Lecture</h3>
                <div class="lecture-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lectureTitle">Lecture Title</label>
                            <input type="text" id="lectureTitle" placeholder="e.g., Introduction to Calculus">
                        </div>
                        <div class="form-group">
                            <label for="lectureSubject">Subject</label>
                            <input type="text" id="lectureSubject" placeholder="e.g., Mathematics">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lectureURL">Video URL</label>
                            <input type="url" id="lectureURL" placeholder="YouTube, Vimeo, or direct video link">
                        </div>
                        <div class="form-group">
                            <label for="lectureDuration">Duration (minutes)</label>
                            <input type="number" id="lectureDuration" placeholder="e.g., 45" min="1">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="lectureLevel">Difficulty Level</label>
                            <select id="lectureLevel">
                                <option value="Beginner">Beginner</option>
                                <option value="Intermediate">Intermediate</option>
                                <option value="Advanced">Advanced</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="lectureInstructor">Instructor</label>
                            <input type="text" id="lectureInstructor" placeholder="Instructor name (optional)">
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label for="lectureDescription">Description</label>
                        <textarea id="lectureDescription" rows="3" placeholder="Brief description of the lecture content..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="addLecture()">
                            ‚ûï Add Lecture
                        </button>
                        <button class="btn btn-secondary" onclick="clearLectureForm()">
                            ÔøΩ Clear Form
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lectures Display -->
            <div class="lectures-display-section">
                <div class="section-header">
                    <h3>üìö Your Lectures</h3>
                    <div class="lecture-controls">
                        <input type="text" id="lectureSearch" placeholder="Search lectures..." onkeyup="searchLectures()">
                        <select id="subjectFilter" onchange="filterLectures()">
                            <option value="">All Subjects</option>
                        </select>
                    </div>
                </div>
                
                <div id="lecturesGrid" class="lectures-grid">
                    <div class="empty-state">
                        <div class="empty-icon">üé•</div>
                        <h4>No lectures added yet</h4>
                        <p>Add your first lecture using the form above to get started!</p>
                    </div>
                </div>
            </div>

            <!-- Video Player Modal -->
            <div id="videoPlayerModal" class="video-modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalLectureTitle">Lecture Title</h3>
                        <button class="close-btn" onclick="closeVideoPlayer()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="videoPlayerContainer">
                            <!-- Video player will be inserted here -->
                        </div>
                        <div class="lecture-info">
                            <div id="modalLectureDetails"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>

        <!-- Study Material Tool -->
        <div id="study-materialTool" class="tool-section">
            <h2>Study Material</h2>
            <div class="study-material-grid">
                <div class="material-category">
                    <h3>üìÑ Previous Year Questions (PYQs)</h3>
                    <div class="material-list">
                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">üßÆ</div>
                                <div class="material-info">
                                    <h4>Mathematics PYQs</h4>
                                    <div class="material-meta">Calculus, Algebra, Statistics ‚Ä¢ 2019-2024</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Comprehensive collection of previous year mathematics questions covering calculus, linear algebra, differential equations, and statistics.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Years</div>
                                    <div class="value">2019-2024</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Questions</div>
                                    <div class="value">500+</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Format</div>
                                    <div class="value">PDF</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('math-pyqs')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('math-pyqs')">üëÅ Preview</button>
                            </div>
                        </div>

                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">üî¨</div>
                                <div class="material-info">
                                    <h4>Physics PYQs</h4>
                                    <div class="material-meta">Mechanics, Thermodynamics, Optics ‚Ä¢ 2018-2024</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Previous year physics questions covering mechanics, thermodynamics, electromagnetism, optics, and modern physics concepts.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Years</div>
                                    <div class="value">2018-2024</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Questions</div>
                                    <div class="value">450+</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Format</div>
                                    <div class="value">PDF</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('physics-pyqs')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('physics-pyqs')">üëÅ Preview</button>
                            </div>
                        </div>

                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">üß™</div>
                                <div class="material-info">
                                    <h4>Chemistry PYQs</h4>
                                    <div class="material-meta">Organic, Inorganic, Physical ‚Ä¢ 2019-2024</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Previous year chemistry questions covering organic chemistry, inorganic chemistry, physical chemistry, and chemical bonding.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Years</div>
                                    <div class="value">2019-2024</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Questions</div>
                                    <div class="value">400+</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Format</div>
                                    <div class="value">PDF</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('chemistry-pyqs')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('chemistry-pyqs')">üëÅ Preview</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="material-category">
                    <h3>üìù Assignments</h3>
                    <div class="material-list">
                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">üíª</div>
                                <div class="material-info">
                                    <h4>Programming Assignments</h4>
                                    <div class="material-meta">Data Structures, Algorithms, OOP ‚Ä¢ 12 Assignments</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Comprehensive programming assignments covering data structures, algorithms, object-oriented programming, and software design patterns.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Level</div>
                                    <div class="value">Intermediate</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Count</div>
                                    <div class="value">12</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Language</div>
                                    <div class="value">Python/Java</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('programming-assignments')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('programming-assignments')">üëÅ Preview</button>
                            </div>
                        </div>

                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">üìä</div>
                                <div class="material-info">
                                    <h4>Statistics Assignments</h4>
                                    <div class="material-meta">Probability, Hypothesis Testing, Regression ‚Ä¢ 8 Assignments</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Statistical analysis assignments covering probability distributions, hypothesis testing, regression analysis, and data interpretation.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Level</div>
                                    <div class="value">Advanced</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Count</div>
                                    <div class="value">8</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Tools</div>
                                    <div class="value">R/SPSS</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('statistics-assignments')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('statistics-assignments')">üëÅ Preview</button>
                            </div>
                        </div>

                        <div class="material-item">
                            <div class="material-header">
                                <div class="material-icon">‚öóÔ∏è</div>
                                <div class="material-info">
                                    <h4>Lab Assignments</h4>
                                    <div class="material-meta">Physics Lab, Chemistry Lab ‚Ä¢ 15 Experiments</div>
                                </div>
                            </div>
                            <div class="material-description">
                                Practical laboratory assignments with detailed procedures, observations, and analysis for physics and chemistry experiments.
                            </div>
                            <div class="material-details">
                                <div class="detail-item">
                                    <div class="label">Type</div>
                                    <div class="value">Practical</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Count</div>
                                    <div class="value">15</div>
                                </div>
                                <div class="detail-item">
                                    <div class="label">Format</div>
                                    <div class="value">Lab Manual</div>
                                </div>
                            </div>
                            <div class="material-actions">
                                <button class="btn btn-primary" onclick="downloadMaterial('lab-assignments')">üì• Download</button>
                                <button class="btn btn-secondary" onclick="viewMaterial('lab-assignments')">üëÅ Preview</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tool-controls">
                <button class="btn btn-outline" onclick="showTool('home')">‚Üê Back to Tools</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let timerInterval = null;
        let stopwatchInterval = null;
        let stopwatchTime = 0;
        let lapCounter = 1;
        let angleMode = 'deg'; // 'deg' or 'rad'
        let keySequence = '';
        let sequenceTimeout = null;
        let timerPaused = false;
        let timerRemainingSeconds = 0;

        // Navigation function
        function showTool(toolName) {
            // Hide all tools
            const tools = ['calculatorTool', 'notepadTool', 'timerTool', 'simulationsTool', 'lecturesTool', 'study-materialTool'];
            tools.forEach(tool => {
                document.getElementById(tool).style.display = 'none';
            });

            if (toolName === 'home') {
                document.getElementById('toolsGrid').style.display = 'grid';
            } else {
                document.getElementById('toolsGrid').style.display = 'none';
                document.getElementById(toolName + 'Tool').style.display = 'block';
                
                // Initialize specific tools
                if (toolName === 'calculator') {
                    initializeCalculator();
                } else if (toolName === 'notepad') {
                    loadNotepadContent();
                } else if (toolName === 'timer') {
                    initializeTimer();
                } else if (toolName === 'simulations') {
                    initializeSimulations();
                } else if (toolName === 'lectures') {
                    initializeLectures();
                } else if (toolName === 'study-material') {
                    initializeStudyMaterial();
                }
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Angle mode toggle function
        function toggleAngleMode() {
            const degBtn = document.getElementById('degreeMode');
            const radBtn = document.getElementById('radianMode');
            
            if (angleMode === 'deg') {
                angleMode = 'rad';
                degBtn.classList.remove('active');
                radBtn.classList.add('active');
                showNotification('Switched to Radians üìê', 'info');
            } else {
                angleMode = 'deg';
                radBtn.classList.remove('active');
                degBtn.classList.add('active');
                showNotification('Switched to Degrees üìê', 'info');
            }
        }

        // Calculator Functions
        function initializeCalculator() {
            const input = document.getElementById('calculatorInput');
            if (input && !input.value) {
                input.value = '0';
            }
            if (input) {
                input.focus();
            }
        }

        function appendTrigFunction(funcName) {
            const input = document.getElementById('calculatorInput');
            const currentValue = input.value;
            const lastChar = currentValue.slice(-1);
            
            // Add multiplication if needed
            if (currentValue !== '0' && currentValue !== 'Error' && /\d$/.test(lastChar)) {
                input.value += '√ó' + funcName + '(';
            } else if (currentValue === '0' || currentValue === 'Error') {
                input.value = funcName + '(';
            } else {
                input.value += funcName + '(';
            }
            
            // Focus the input for immediate typing
            input.focus();
        }

        function appendToCalculator(value) {
            const input = document.getElementById('calculatorInput');
            const currentValue = input.value;
            
            if (currentValue === '0' && value !== '.' && value !== ')') {
                input.value = value;
            } else if (currentValue === 'Error') {
                input.value = value;
            } else {
                const lastChar = currentValue.slice(-1);
                const operators = ['+', '-', '*', '√ó', '/', '^'];
                
                if (operators.includes(lastChar) && operators.includes(value)) {
                    input.value = currentValue.slice(0, -1) + value;
                } else if (value === ')' && currentValue === '0') {
                    return;
                } else if (value === '(' && /\d$/.test(lastChar)) {
                    input.value += '√ó' + value;
                } else if (value === '‚àö') {
                    if (/\d$/.test(lastChar)) {
                        input.value += '√ó‚àö';
                    } else {
                        input.value += '‚àö';
                    }
                } else if (value === '!') {
                    if (/[\d)]$/.test(lastChar)) {
                        input.value += value;
                    }
                } else {
                    input.value += value;
                }
            }
        }

        function clearCalculator() {
            document.getElementById('calculatorInput').value = '0';
        }

        function deleteLastCalculator() {
            const input = document.getElementById('calculatorInput');
            if (input.value.length > 1) {
                input.value = input.value.slice(0, -1);
            } else {
                input.value = '0';
            }
        }

        function calculateFactorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            if (n > 170) return Infinity;
            
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function evaluateExpression(expression) {
            // Determine conversion factor based on angle mode
            const toRadians = angleMode === 'deg' ? ' * Math.PI / 180' : '';
            const fromRadians = angleMode === 'deg' ? ' * 180 / Math.PI' : '';
            
            // Replace functions in specific order to avoid conflicts
            // Start with longer function names first
            
            // Inverse trigonometric functions (convert result from radians)
            expression = expression.replace(/asin\(/g, '__TEMP_ASIN__(');
            expression = expression.replace(/acos\(/g, '__TEMP_ACOS__(');
            expression = expression.replace(/atan\(/g, '__TEMP_ATAN__(');
            
            // Reciprocal functions
            expression = expression.replace(/cosec\(/g, '__TEMP_COSEC__(');
            expression = expression.replace(/csc\(/g, '__TEMP_CSC__(');
            expression = expression.replace(/sec\(/g, '__TEMP_SEC__(');
            expression = expression.replace(/cot\(/g, '__TEMP_COT__(');
            
            // Regular trigonometric functions (convert input to radians)
            expression = expression.replace(/sin\(/g, '__TEMP_SIN__(');
            expression = expression.replace(/cos\(/g, '__TEMP_COS__(');
            expression = expression.replace(/tan\(/g, '__TEMP_TAN__(');
            
            // Other functions
            expression = expression.replace(/log\(/g, '__TEMP_LOG__(');
            
            // Now replace with actual Math functions
            // Inverse functions
            expression = expression.replace(/__TEMP_ASIN__\(([^)]+)\)/g, (match, contents) => {
                return `(Math.asin(${contents})${fromRadians})`;
            });
            
            expression = expression.replace(/__TEMP_ACOS__\(([^)]+)\)/g, (match, contents) => {
                return `(Math.acos(${contents})${fromRadians})`;
            });
            
            expression = expression.replace(/__TEMP_ATAN__\(([^)]+)\)/g, (match, contents) => {
                return `(Math.atan(${contents})${fromRadians})`;
            });
            
            // Regular functions
            expression = expression.replace(/__TEMP_SIN__\(([^)]+)\)/g, (match, contents) => {
                return `Math.sin((${contents})${toRadians})`;
            });
            
            expression = expression.replace(/__TEMP_COS__\(([^)]+)\)/g, (match, contents) => {
                return `Math.cos((${contents})${toRadians})`;
            });
            
            expression = expression.replace(/__TEMP_TAN__\(([^)]+)\)/g, (match, contents) => {
                return `Math.tan((${contents})${toRadians})`;
            });
            
            // Reciprocal functions
            expression = expression.replace(/__TEMP_SEC__\(([^)]+)\)/g, (match, contents) => {
                return `(1 / Math.cos((${contents})${toRadians}))`;
            });
            
            expression = expression.replace(/__TEMP_COSEC__\(([^)]+)\)/g, (match, contents) => {
                return `(1 / Math.sin((${contents})${toRadians}))`;
            });
            
            expression = expression.replace(/__TEMP_CSC__\(([^)]+)\)/g, (match, contents) => {
                return `(1 / Math.sin((${contents})${toRadians}))`;
            });
            
            expression = expression.replace(/__TEMP_COT__\(([^)]+)\)/g, (match, contents) => {
                return `(1 / Math.tan((${contents})${toRadians}))`;
            });
            
            // Logarithm
            expression = expression.replace(/__TEMP_LOG__\(([^)]+)\)/g, (match, contents) => {
                return `Math.log10(${contents})`;
            });
            
            // Handle square root
            expression = expression.replace(/‚àö\(([^)]+)\)/g, (match, contents) => {
                return `Math.sqrt(${contents})`;
            });
            
            expression = expression.replace(/‚àö(\d+\.?\d*)/g, (match, number) => {
                return `Math.sqrt(${number})`;
            });
            
            // Handle factorial
            expression = expression.replace(/(\d+\.?\d*)!/g, (match, number) => {
                const num = parseFloat(number);
                if (num !== Math.floor(num) || num < 0) {
                    throw new Error('Factorial only works with non-negative integers');
                }
                return calculateFactorial(num).toString();
            });
            
            return expression;
        }

        function calculateResult() {
            const input = document.getElementById('calculatorInput');
            try {
                let expression = input.value;
                
                // Auto-close trigonometric functions if they're missing closing brackets
                expression = expression.replace(/(sin|cos|tan|asin|acos|atan|sec|csc|cot|log)\(([^)]*?)$/g, '$1($2)');
                
                const openParens = (expression.match(/\(/g) || []).length;
                const closeParens = (expression.match(/\)/g) || []).length;
                
                if (openParens !== closeParens) {
                    throw new Error('Unbalanced parentheses');
                }
                
                expression = evaluateExpression(expression);
                expression = expression.replace(/√ó/g, '*');
                expression = expression.replace(/\^/g, '**');
                
                if (/[+\-*\/\*\*]$/.test(expression)) {
                    throw new Error('Invalid expression');
                }
                
                // Enhanced validation pattern to include trigonometric functions
                const allowedPattern = /^[0-9+\-*\/\(\)\.\s]*$/;
                const cleanExpression = expression
                    .replace(/Math\.(sin|cos|tan|asin|acos|atan|sqrt|log10|PI)\(/g, '')
                    .replace(/Math\.(sin|cos|tan|asin|acos|atan|sqrt|log10|PI)/g, '')
                    .replace(/\(1 \/ Math\.(sin|cos|tan)\(/g, '')
                    .replace(/180/g, '')
                    .replace(/\)\)/g, '');
                
                if (!allowedPattern.test(cleanExpression)) {
                    throw new Error('Invalid characters in expression');
                }
                
                const result = new Function('return ' + expression)();
                
                if (result === Infinity) {
                    input.value = '‚àû';
                    return;
                } else if (result === -Infinity) {
                    input.value = '-‚àû';
                    return;
                } else if (isNaN(result)) {
                    throw new Error('Undefined result');
                } else if (!isFinite(result)) {
                    throw new Error('Invalid result');
                }
                
                const formattedResult = Number.isInteger(result) ? 
                    result.toString() : 
                    parseFloat(result.toFixed(10)).toString();
                
                input.value = formattedResult;
            } catch (error) {
                if (error.message === 'Undefined result') {
                    input.value = 'Undefined';
                    showNotification('Function undefined at this point! ‚ö†Ô∏è', 'warning');
                } else if (error.message.includes('Factorial')) {
                    input.value = 'Error';
                    showNotification(error.message + ' ‚ö†Ô∏è', 'warning');
                } else {
                    input.value = 'Error';
                    showNotification('Invalid expression! ‚ùå', 'error');
                }
                setTimeout(() => {
                    input.value = '0';
                }, 2000);
            }
        }

        // Notepad Functions
        function saveNote() {
            const content = document.getElementById('notepadText').value;
            if (!content.trim()) {
                showNotification('Nothing to save! üìù', 'warning');
                return;
            }
            
            const filename = prompt('Enter filename:', 'my-note');
            if (!filename) {
                showNotification('Save cancelled! ‚ùå', 'info');
                return;
            }
            
            const timestamp = new Date().toISOString();
            const fileData = {
                content: content,
                filename: filename,
                timestamp: timestamp
            };
            
            const savedFiles = JSON.parse(localStorage.getItem('notepad_saved_files') || '[]');
            
            const existingIndex = savedFiles.findIndex(file => file.filename === filename);
            if (existingIndex !== -1) {
                if (!confirm(`File "${filename}" already exists. Overwrite?`)) {
                    showNotification('Save cancelled! ‚ùå', 'info');
                    return;
                }
                savedFiles[existingIndex] = fileData;
            } else {
                savedFiles.push(fileData);
            }
            
            localStorage.setItem('notepad_saved_files', JSON.stringify(savedFiles));
            localStorage.setItem('notepad_content', content);
            
            showNotification(`File "${filename}" saved! üíæ`, 'success');
            updateSavedFilesList();
        }

        function clearNote() {
            if (confirm('Are you sure you want to clear all text?')) {
                document.getElementById('notepadText').value = '';
                localStorage.removeItem('notepad_content');
                showNotification('Note cleared! üóëÔ∏è', 'info');
            }
        }

        function downloadNote() {
            const content = document.getElementById('notepadText').value;
            if (!content.trim()) {
                showNotification('Nothing to download! üìù', 'warning');
                return;
            }
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'note.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            showNotification('Note downloaded! üì•', 'success');
        }

        function loadNotepadContent() {
            const savedContent = localStorage.getItem('notepad_content');
            if (savedContent) {
                document.getElementById('notepadText').value = savedContent;
            }
            updateSavedFilesList();
        }

        function updateSavedFilesList() {
            const savedFiles = JSON.parse(localStorage.getItem('notepad_saved_files') || '[]');
            const filesList = document.getElementById('savedFilesList');
            
            if (!filesList) return;
            
            if (savedFiles.length === 0) {
                filesList.innerHTML = '<p class="no-files">No saved files</p>';
                return;
            }
            
            filesList.innerHTML = savedFiles.map((file, index) => `
                <div class="saved-file-item">
                    <div class="file-info">
                        <strong>${file.filename}</strong>
                        <small>${new Date(file.timestamp).toLocaleString()}</small>
                    </div>
                    <div class="file-actions">
                        <button class="btn btn-small" onclick="loadFile('${file.filename.replace(/'/g, "\\'")}')">üìÇ Load</button>
                        <button class="btn btn-small" onclick="downloadFile('${file.filename.replace(/'/g, "\\'")}')">üì• Download</button>
                        <button class="btn btn-small" onclick="deleteFile('${file.filename.replace(/'/g, "\\'")}')">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function loadFile(filename) {
            const savedFiles = JSON.parse(localStorage.getItem('notepad_saved_files') || '[]');
            const file = savedFiles.find(f => f.filename === filename);
            
            if (file) {
                document.getElementById('notepadText').value = file.content;
                localStorage.setItem('notepad_content', file.content);
                showNotification(`File "${filename}" loaded! üìÇ`, 'success');
            } else {
                showNotification('File not found! ‚ùå', 'error');
            }
        }

        function downloadFile(filename) {
            const savedFiles = JSON.parse(localStorage.getItem('notepad_saved_files') || '[]');
            const file = savedFiles.find(f => f.filename === filename);
            
            if (file) {
                const blob = new Blob([file.content], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${filename}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                showNotification(`File "${filename}" downloaded! üì•`, 'success');
            } else {
                showNotification('File not found! ‚ùå', 'error');
            }
        }

        function deleteFile(filename) {
            if (!confirm(`Are you sure you want to delete "${filename}"?`)) {
                return;
            }
            
            const savedFiles = JSON.parse(localStorage.getItem('notepad_saved_files') || '[]');
            const filteredFiles = savedFiles.filter(f => f.filename !== filename);
            
            if (filteredFiles.length < savedFiles.length) {
                localStorage.setItem('notepad_saved_files', JSON.stringify(filteredFiles));
                showNotification(`File "${filename}" deleted! üóëÔ∏è`, 'info');
                updateSavedFilesList();
            } else {
                showNotification('File not found! ‚ùå', 'error');
            }
        }

        // Timer Functions
        function initializeTimer() {
            switchTimerTab('timer');
        }

        function switchTimerTab(tab) {
            const timerTab = document.getElementById('timerTab');
            const stopwatchTab = document.getElementById('stopwatchTab');
            const timerSection = document.getElementById('timerSection');
            const stopwatchSection = document.getElementById('stopwatchSection');
            
            if (tab === 'timer') {
                timerTab.classList.add('active');
                stopwatchTab.classList.remove('active');
                timerSection.style.display = 'block';
                stopwatchSection.style.display = 'none';
            } else {
                timerTab.classList.remove('active');
                stopwatchTab.classList.add('active');
                timerSection.style.display = 'none';
                stopwatchSection.style.display = 'block';
            }
        }

        function startTimer() {
            const startBtn = document.getElementById('startTimer');
            const resetBtn = document.getElementById('resetTimer');
            
            // Check current button state to determine action
            if (startBtn.textContent === 'Start') {
                // Starting fresh timer
                const hours = parseInt(document.getElementById('timerHours').value) || 0;
                const minutes = parseInt(document.getElementById('timerMinutes').value) || 0;
                const seconds = parseInt(document.getElementById('timerSeconds').value) || 0;
                let totalSeconds = hours * 3600 + minutes * 60 + seconds;
                
                if (totalSeconds <= 0) {
                    showNotification('Please set a valid time! ‚è∞', 'warning');
                    return;
                }
                
                timerRemainingSeconds = totalSeconds;
                timerPaused = false;
                startBtn.textContent = 'Pause';
                
                timerInterval = setInterval(() => {
                    const hrs = Math.floor(timerRemainingSeconds / 3600);
                    const mins = Math.floor((timerRemainingSeconds % 3600) / 60);
                    const secs = timerRemainingSeconds % 60;
                    document.getElementById('timerDisplay').textContent = 
                        `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    
                    if (timerRemainingSeconds <= 0) {
                        clearInterval(timerInterval);
                        timerInterval = null;
                        startBtn.textContent = 'Start';
                        timerPaused = false;
                        timerRemainingSeconds = 0;
                        showNotification('Timer finished! ‚è∞', 'success');
                        playTimerSound();
                        return;
                    }
                    timerRemainingSeconds--;
                }, 1000);
                
            } else if (startBtn.textContent === 'Pause') {
                // Pausing the timer
                clearInterval(timerInterval);
                timerInterval = null;
                timerPaused = true;
                startBtn.textContent = 'Resume';
                showNotification('Timer paused! ‚è∏Ô∏è', 'info');
                
            } else if (startBtn.textContent === 'Resume') {
                // Resuming the timer
                timerPaused = false;
                startBtn.textContent = 'Pause';
                
                timerInterval = setInterval(() => {
                    const hrs = Math.floor(timerRemainingSeconds / 3600);
                    const mins = Math.floor((timerRemainingSeconds % 3600) / 60);
                    const secs = timerRemainingSeconds % 60;
                    document.getElementById('timerDisplay').textContent = 
                        `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                    
                    if (timerRemainingSeconds <= 0) {
                        clearInterval(timerInterval);
                        timerInterval = null;
                        startBtn.textContent = 'Start';
                        timerPaused = false;
                        timerRemainingSeconds = 0;
                        showNotification('Timer finished! ‚è∞', 'success');
                        playTimerSound();
                        return;
                    }
                    timerRemainingSeconds--;
                }, 1000);
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerPaused = false;
            timerRemainingSeconds = 0;
            const startBtn = document.getElementById('startTimer');
            startBtn.textContent = 'Start';
            document.getElementById('timerDisplay').textContent = '00:05:00';
            document.getElementById('timerHours').value = 0;
            document.getElementById('timerMinutes').value = 5;
            document.getElementById('timerSeconds').value = 0;
        }

        function startStopwatch() {
            const startBtn = document.getElementById('startStopwatch');
            
            if (startBtn.textContent === 'Start') {
                startBtn.textContent = 'Stop';
                stopwatchInterval = setInterval(() => {
                    stopwatchTime++;
                    updateStopwatchDisplay();
                }, 10);
            } else {
                startBtn.textContent = 'Start';
                clearInterval(stopwatchInterval);
            }
        }

        function lapStopwatch() {
            if (stopwatchInterval) {
                const lapTime = formatStopwatchTime(stopwatchTime);
                const lapDiv = document.createElement('div');
                lapDiv.className = 'lap-time';
                lapDiv.innerHTML = `<span>Lap ${lapCounter}</span><span>${lapTime}</span>`;
                document.getElementById('lapTimes').appendChild(lapDiv);
                lapCounter++;
            }
        }

        function resetStopwatch() {
            clearInterval(stopwatchInterval);
            stopwatchTime = 0;
            lapCounter = 1;
            document.getElementById('startStopwatch').textContent = 'Start';
            updateStopwatchDisplay();
            document.getElementById('lapTimes').innerHTML = '';
        }

        function updateStopwatchDisplay() {
            document.getElementById('stopwatchDisplay').textContent = formatStopwatchTime(stopwatchTime);
        }

        function formatStopwatchTime(time) {
            const minutes = Math.floor(time / 6000);
            const seconds = Math.floor((time % 6000) / 100);
            const centiseconds = time % 100;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}:${centiseconds.toString().padStart(2, '0')}`;
        }

        function playTimerSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (error) {
                console.log('Could not play timer sound:', error);
            }
        }

        // Auto-save notepad content as user types
        document.addEventListener('DOMContentLoaded', function() {
            const notepadText = document.getElementById('notepadText');
            if (notepadText) {
                notepadText.addEventListener('input', function() {
                    localStorage.setItem('notepad_content', this.value);
                });
            }
        });

        // Keyboard shortcuts for calculator
        document.addEventListener('keydown', function(e) {
            const calculatorTool = document.getElementById('calculatorTool');
            const searchInput = document.getElementById('search-input');
            
            // Don't interfere with search input when it's focused
            if (document.activeElement === searchInput) {
                return;
            }
            
            // Only handle calculator shortcuts when calculator is visible
            if (!calculatorTool || calculatorTool.style.display === 'none') {
                return;
            }

            const key = e.key.toLowerCase();
            
            // Handle letter sequences for function names
            if (/[a-z]/.test(key) && key.length === 1) {
                e.preventDefault();
                
                keySequence += key;
                
                // Show typing indicator
                const input = document.getElementById('calculatorInput');
                const currentValue = input.value;
                
                // Clear previous sequence timeout
                clearTimeout(sequenceTimeout);
                
                // Set new timeout to clear sequence after 2 seconds
                sequenceTimeout = setTimeout(() => {
                    keySequence = '';
                }, 2000);
                
                // Check for complete function names and trigger immediately
                if (keySequence.endsWith('asin')) {
                    appendTrigFunction('asin');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('acos')) {
                    appendTrigFunction('acos');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('atan')) {
                    appendTrigFunction('atan');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('sin') && !keySequence.includes('asin') && !keySequence.includes('cosing')) {
                    appendTrigFunction('sin');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('cos') && !keySequence.includes('acos')) {
                    appendTrigFunction('cos');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('tan') && !keySequence.includes('atan')) {
                    appendTrigFunction('tan');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('sec')) {
                    appendTrigFunction('sec');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('csc') || keySequence.endsWith('cosec')) {
                    appendTrigFunction('csc');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('cot')) {
                    appendTrigFunction('cot');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('log')) {
                    appendToCalculator('log(');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('sqrt')) {
                    appendToCalculator('‚àö');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('pow')) {
                    appendToCalculator('^');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                } else if (keySequence.endsWith('fact') || keySequence.endsWith('factorial')) {
                    appendToCalculator('!');
                    keySequence = '';
                    clearTimeout(sequenceTimeout);
                    return;
                }
                
                console.log('Current sequence:', keySequence); // Debug log
                return; // Don't process other actions while building sequence
            }
            
            // Clear sequence for non-letter keys
            keySequence = '';
            clearTimeout(sequenceTimeout);
            
            // Handle individual keys and special combinations
            if (/[0-9+\-*/.()^!=]/.test(e.key) || e.key === 'Enter' || e.key === 'Backspace' || e.key === 'Delete' || e.key === 'Escape' || e.key === 'c' || e.key === 'C') {
                e.preventDefault();
                
                if (/[0-9+\-/.()^!=]/.test(e.key)) {
                    if (e.key === '*') {
                        appendToCalculator('√ó');
                    } else {
                        appendToCalculator(e.key);
                    }
                } else if (e.key === 'Enter') {
                    calculateResult();
                } else if (e.key === 'Backspace') {
                    deleteLastCalculator();
                } else if (e.key === 'Delete' || e.key === 'Escape' || e.key === 'c' || e.key === 'C') {
                    clearCalculator();
                }
            }
            
            // Handle 'd' key for degree/radian toggle when not building a sequence
            if (e.key === 'd' && keySequence === '') {
                e.preventDefault();
                toggleAngleMode();
            }
        });

        // Engineering Graphics & Diagonal Scales Functions
        function initializeSimulations() {
            showNotification('Engineering Graphics & Drafting Simulation loaded! ÔøΩ', 'success');
            // Initialize the canvas
            setTimeout(() => {
                drawDiagonalScale();
            }, 500);
        }

        // Simulation Navigation Functions
        function openSimulation(simulationType) {
            const simulationsGrid = document.querySelector('.simulations-grid');
            const engineeringGraphics = document.getElementById('engineeringGraphicsSimulation');
            
            if (simulationType === 'engineering-graphics') {
                simulationsGrid.style.display = 'none';
                engineeringGraphics.style.display = 'block';
            } else {
                // For other simulations, show "Coming Soon" message
                alert(`${simulationType.charAt(0).toUpperCase() + simulationType.slice(1)} simulation is coming soon! üöÄ\n\nFor now, try the Engineering Graphics simulation to learn about diagonal scales.`);
            }
        }

        function showSimulationsList() {
            const simulationsGrid = document.querySelector('.simulations-grid');
            const engineeringGraphics = document.getElementById('engineeringGraphicsSimulation');
            
            simulationsGrid.style.display = 'grid';
            engineeringGraphics.style.display = 'none';
            
            // Reset the canvas if it exists
            const canvas = document.getElementById('scaleCanvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            // Reset measurement display
            const measurementDisplay = document.getElementById('measurementDisplay');
            if (measurementDisplay) {
                measurementDisplay.innerHTML = 'Click "Generate Scale" to begin the interactive tutorial';
            }
        }

        // Diagonal Scale Functions
        function drawDiagonalScale() {
            const canvas = document.getElementById('scaleCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Get parameters
            const maxValue = parseInt(document.getElementById('maxValue').value) || 100;
            const majorDivisions = parseInt(document.getElementById('majorDivisions').value) || 10;
            const minorDivisions = parseInt(document.getElementById('minorDivisions').value) || 10;
            const scaleLengthCm = parseInt(document.getElementById('scaleLength').value) || 15;
            const targetValue = parseFloat(document.getElementById('targetValue').value) || 23.7;
            const scaleType = document.getElementById('scaleType').value;
            const showConstruction = document.getElementById('showConstruction').checked;
            
            // Convert cm to pixels (assuming 1cm = 30px for display)
            const scaleLength = scaleLengthCm * 30;
            const startX = 50;
            const startY = 100;
            
            // Calculate divisions
            const majorDivLength = scaleLength / majorDivisions;
            const minorDivLength = majorDivLength / minorDivisions;
            
            // Draw main scale line
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + scaleLength, startY);
            ctx.stroke();
            
            // Draw major divisions
            ctx.lineWidth = 2;
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            
            for (let i = 0; i <= majorDivisions; i++) {
                const x = startX + (i * majorDivLength);
                
                // Major division line
                ctx.beginPath();
                ctx.moveTo(x, startY - 15);
                ctx.lineTo(x, startY + 15);
                ctx.stroke();
                
                // Major division label
                const value = (maxValue / majorDivisions) * i;
                ctx.fillText(value.toString(), x - 10, startY + 35);
            }
            
            if (scaleType === 'diagonal') {
                // Draw diagonal scale
                const diagonalHeight = 60;
                
                // Draw horizontal lines for minor divisions
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                
                for (let i = 0; i <= minorDivisions; i++) {
                    const y = startY + (i * diagonalHeight / minorDivisions);
                    ctx.beginPath();
                    ctx.moveTo(startX, y);
                    ctx.lineTo(startX + majorDivLength, y);
                    ctx.stroke();
                }
                
                // Draw diagonal lines
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 1;
                
                for (let i = 0; i < majorDivisions; i++) {
                    const x1 = startX + (i * majorDivLength);
                    const x2 = startX + ((i + 1) * majorDivLength);
                    
                    for (let j = 1; j <= minorDivisions; j++) {
                        ctx.beginPath();
                        ctx.moveTo(x1, startY + (j * diagonalHeight / minorDivisions));
                        ctx.lineTo(x2, startY + ((j - 1) * diagonalHeight / minorDivisions));
                        ctx.stroke();
                    }
                }
                
                // Draw measurement demonstration
                if (targetValue <= maxValue) {
                    const units = Math.floor(targetValue / (maxValue / majorDivisions));
                    const remainder = targetValue % (maxValue / majorDivisions);
                    const tenths = Math.floor(remainder * minorDivisions / (maxValue / majorDivisions));
                    const hundredths = ((remainder * minorDivisions) % (maxValue / majorDivisions)) / (maxValue / majorDivisions);
                    
                    // Highlight the measurement
                    ctx.strokeStyle = '#2ecc71';
                    ctx.lineWidth = 3;
                    
                    const measureX = startX + (units * majorDivLength) + (tenths * majorDivLength / minorDivisions);
                    const measureY = startY + (tenths * diagonalHeight / minorDivisions) + 
                                    (hundredths * (diagonalHeight / minorDivisions));
                    
                    // Draw measurement point
                    ctx.beginPath();
                    ctx.arc(measureX, measureY, 5, 0, 2 * Math.PI);
                    ctx.fillStyle = '#2ecc71';
                    ctx.fill();
                    
                    // Draw measurement lines
                    ctx.beginPath();
                    ctx.moveTo(measureX, measureY);
                    ctx.lineTo(measureX, startY - 20);
                    ctx.stroke();
                    
                    // Show measurement value
                    ctx.fillStyle = '#2ecc71';
                    ctx.font = 'bold 14px Arial';
                    ctx.fillText(`${targetValue}`, measureX - 15, startY - 25);
                }
                
                // Add labels for diagonal scale
                ctx.fillStyle = '#333';
                ctx.font = '10px Arial';
                for (let i = 0; i <= minorDivisions; i++) {
                    const y = startY + (i * diagonalHeight / minorDivisions);
                    ctx.fillText(i.toString(), startX - 20, y + 3);
                }
            }
            
            // Add title and instructions
            ctx.fillStyle = '#333';
            ctx.font = 'bold 16px Arial';
            ctx.fillText(`${scaleType === 'diagonal' ? 'Diagonal' : 'Plain'} Scale - Max: ${maxValue}, Target: ${targetValue}`, startX, 30);
            
            if (showConstruction) {
                ctx.font = '12px Arial';
                ctx.fillStyle = '#666';
                ctx.fillText('Red lines: Diagonal divisions for precise measurements', startX, canvas.height - 60);
                ctx.fillText('Green dot: Target measurement location', startX, canvas.height - 40);
                ctx.fillText('Scale: 1 major division = ' + (maxValue/majorDivisions), startX, canvas.height - 20);
            }
            
            // Update measurement display
            updateMeasurementDisplay(targetValue, maxValue, majorDivisions, minorDivisions);
        }
        
        function updateMeasurementDisplay(targetValue, maxValue, majorDivisions, minorDivisions) {
            const display = document.getElementById('measurementDisplay');
            
            if (targetValue > maxValue) {
                display.innerHTML = `‚ùå Target value (${targetValue}) exceeds scale maximum (${maxValue})`;
                display.style.background = 'rgba(231, 76, 60, 0.2)';
                return;
            }
            
            const unitValue = maxValue / majorDivisions;
            const units = Math.floor(targetValue / unitValue);
            const remainder = targetValue % unitValue;
            const tenths = Math.floor(remainder * minorDivisions / unitValue);
            const hundredths = Math.round(((remainder * minorDivisions) % unitValue) / unitValue * 10);
            
            display.innerHTML = `
                üìè <strong>Reading: ${targetValue}</strong><br>
                üìä Breakdown: ${units} units + ${tenths}.${hundredths} subdivisions<br>
                üéØ Position: Major div ${units}, Minor div ${tenths}, Diagonal ${hundredths}
            `;
            display.style.background = 'rgba(79, 70, 229, 0.2)';
        }
        
        function startTutorial() {
            document.getElementById('maxValue').value = 50;
            document.getElementById('majorDivisions').value = 5;
            document.getElementById('minorDivisions').value = 10;
            document.getElementById('targetValue').value = 12.3;
            document.getElementById('scaleType').value = 'diagonal';
            document.getElementById('showConstruction').checked = true;
            drawDiagonalScale();
            showNotification('üìñ Tutorial started! Study the construction carefully.', 'info');
        }
        
        function practiceMode() {
            const randomTarget = Math.round(Math.random() * 45 + 5);
            document.getElementById('targetValue').value = randomTarget + Math.random().toFixed(1);
            drawDiagonalScale();
            showNotification('üéØ Practice mode! Try to read the highlighted measurement.', 'info');
        }
        
        function showExample() {
            document.getElementById('maxValue').value = 100;
            document.getElementById('majorDivisions').value = 10;
            document.getElementById('minorDivisions').value = 10;
            document.getElementById('targetValue').value = 37.6;
            document.getElementById('scaleType').value = 'diagonal';
            document.getElementById('showConstruction').checked = true;
            drawDiagonalScale();
            showNotification('üí° Example: How to read 37.6 on a diagonal scale', 'success');
        }
        
        function resetScale() {
            document.getElementById('maxValue').value = 100;
            document.getElementById('majorDivisions').value = 10;
            document.getElementById('minorDivisions').value = 10;
            document.getElementById('scaleLength').value = 15;
            document.getElementById('targetValue').value = 23.7;
            document.getElementById('scaleType').value = 'diagonal';
            document.getElementById('showConstruction').checked = true;
            drawDiagonalScale();
            showNotification('üîÑ Scale reset to default values', 'info');
        }

        // Lectures Functions
        function initializeLectures() {
            showNotification('Educational Lectures loaded! üéì', 'success');
        }

        // Lecture Management Functions
        let userLectures = JSON.parse(localStorage.getItem('userLectures')) || [];

        function addLecture() {
            const title = document.getElementById('lectureTitle').value.trim();
            const subject = document.getElementById('lectureSubject').value.trim();
            const url = document.getElementById('lectureURL').value.trim();
            const duration = document.getElementById('lectureDuration').value;
            const level = document.getElementById('lectureLevel').value;
            const instructor = document.getElementById('lectureInstructor').value.trim();
            const description = document.getElementById('lectureDescription').value.trim();

            // Validation
            if (!title || !subject || !url || !duration) {
                showNotification('Please fill in all required fields! ‚ö†Ô∏è', 'error');
                return;
            }

            // Validate URL
            if (!isValidURL(url)) {
                showNotification('Please enter a valid URL! ‚ö†Ô∏è', 'error');
                return;
            }

            const lecture = {
                id: Date.now().toString(),
                title,
                subject,
                url,
                duration: parseInt(duration),
                level,
                instructor: instructor || 'Unknown',
                description: description || 'No description provided',
                dateAdded: new Date().toISOString(),
                thumbnail: getVideoThumbnail(url)
            };

            userLectures.push(lecture);
            saveLectures();
            displayLectures();
            clearLectureForm();
            updateSubjectFilter();

            showNotification(`Lecture "${title}" added successfully! üéâ`, 'success');
        }

        function clearLectureForm() {
            document.getElementById('lectureTitle').value = '';
            document.getElementById('lectureSubject').value = '';
            document.getElementById('lectureURL').value = '';
            document.getElementById('lectureDuration').value = '';
            document.getElementById('lectureLevel').value = 'Beginner';
            document.getElementById('lectureInstructor').value = '';
            document.getElementById('lectureDescription').value = '';
        }

        function saveLectures() {
            localStorage.setItem('userLectures', JSON.stringify(userLectures));
        }

        function displayLectures(lecturesToShow = userLectures) {
            const grid = document.getElementById('lecturesGrid');
            
            if (lecturesToShow.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üé•</div>
                        <h4>No lectures found</h4>
                        <p>${userLectures.length === 0 ? 'Add your first lecture using the form above to get started!' : 'Try adjusting your search or filter criteria.'}</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = lecturesToShow.map(lecture => `
                <div class="lecture-card">
                    <button class="delete-btn" onclick="deleteLecture('${lecture.id}')" title="Delete lecture">
                        √ó
                    </button>
                    <div class="lecture-header">
                        <div class="lecture-icon">${getSubjectIcon(lecture.subject)}</div>
                        <div class="lecture-info">
                            <h3>${lecture.title}</h3>
                            <div class="subject">${lecture.subject} ‚Ä¢ ${lecture.level} Level</div>
                        </div>
                    </div>
                    <div class="lecture-description">
                        ${lecture.description}
                    </div>
                    <div class="lecture-details">
                        <div class="detail-item">
                            <div class="label">Duration</div>
                            <div class="value">${lecture.duration} min</div>
                        </div>
                        <div class="detail-item">
                            <div class="label">Level</div>
                            <div class="value">${lecture.level}</div>
                        </div>
                        <div class="detail-item">
                            <div class="label">Instructor</div>
                            <div class="value">${lecture.instructor}</div>
                        </div>
                    </div>
                    <div class="lecture-actions">
                        <button class="btn btn-primary" onclick="playLecture('${lecture.id}')">‚ñ∂ Watch Lecture</button>
                        <button class="btn btn-secondary" onclick="copyLectureURL('${lecture.id}')">üîó Copy Link</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteLecture(lectureId) {
            const lecture = userLectures.find(l => l.id === lectureId);
            if (lecture && confirm(`Are you sure you want to delete "${lecture.title}"?`)) {
                userLectures = userLectures.filter(l => l.id !== lectureId);
                saveLectures();
                displayLectures();
                updateSubjectFilter();
                showNotification('Lecture deleted successfully! üóëÔ∏è', 'success');
            }
        }

        function playLecture(lectureId) {
            const lecture = userLectures.find(l => l.id === lectureId);
            if (!lecture) return;

            const modal = document.getElementById('videoPlayerModal');
            const titleElement = document.getElementById('modalLectureTitle');
            const containerElement = document.getElementById('videoPlayerContainer');
            const detailsElement = document.getElementById('modalLectureDetails');

            titleElement.textContent = lecture.title;
            
            // Create video player based on URL type
            const videoHTML = createVideoPlayer(lecture.url);
            containerElement.innerHTML = videoHTML;

            detailsElement.innerHTML = `
                <p><strong>Subject:</strong> ${lecture.subject}</p>
                <p><strong>Duration:</strong> ${lecture.duration} minutes</p>
                <p><strong>Level:</strong> ${lecture.level}</p>
                <p><strong>Instructor:</strong> ${lecture.instructor}</p>
                <p><strong>Description:</strong> ${lecture.description}</p>
            `;

            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeVideoPlayer() {
            const modal = document.getElementById('videoPlayerModal');
            const container = document.getElementById('videoPlayerContainer');
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            container.innerHTML = ''; // Stop video playback
        }

        function copyLectureURL(lectureId) {
            const lecture = userLectures.find(l => l.id === lectureId);
            if (lecture) {
                navigator.clipboard.writeText(lecture.url).then(() => {
                    showNotification('Lecture URL copied to clipboard! üìã', 'success');
                });
            }
        }

        function searchLectures() {
            const searchTerm = document.getElementById('lectureSearch').value.toLowerCase();
            const subjectFilter = document.getElementById('subjectFilter').value;
            
            let filtered = userLectures;
            
            if (searchTerm) {
                filtered = filtered.filter(lecture => 
                    lecture.title.toLowerCase().includes(searchTerm) ||
                    lecture.subject.toLowerCase().includes(searchTerm) ||
                    lecture.instructor.toLowerCase().includes(searchTerm) ||
                    lecture.description.toLowerCase().includes(searchTerm)
                );
            }
            
            if (subjectFilter) {
                filtered = filtered.filter(lecture => lecture.subject === subjectFilter);
            }
            
            displayLectures(filtered);
        }

        function filterLectures() {
            searchLectures(); // Reuse search function
        }

        function updateSubjectFilter() {
            const filter = document.getElementById('subjectFilter');
            const subjects = [...new Set(userLectures.map(l => l.subject))].sort();
            
            const currentValue = filter.value;
            filter.innerHTML = '<option value="">All Subjects</option>' + 
                subjects.map(subject => `<option value="${subject}">${subject}</option>`).join('');
            filter.value = currentValue;
        }

        // Utility Functions
        function isValidURL(string) {
            try {
                const url = new URL(string);
                return url.protocol === 'http:' || url.protocol === 'https:';
            } catch (_) {
                return false;
            }
        }

        function getSubjectIcon(subject) {
            const icons = {
                'Mathematics': 'üßÆ',
                'Physics': 'üî¨',
                'Chemistry': 'üß™',
                'Biology': 'üß¨',
                'Computer Science': 'üíª',
                'History': 'üåç',
                'Literature': 'üìö',
                'Economics': 'üìà',
                'Psychology': 'üß†',
                'Engineering': '‚öôÔ∏è',
                'Art': 'ÔøΩ',
                'Music': 'üéµ'
            };
            return icons[subject] || 'üìñ';
        }

        function getVideoThumbnail(url) {
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                const videoId = extractYouTubeId(url);
                return videoId ? `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg` : null;
            }
            return null;
        }

        function extractYouTubeId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function createVideoPlayer(url) {
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                const videoId = extractYouTubeId(url);
                if (videoId) {
                    return `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" allowfullscreen></iframe>`;
                }
            } else if (url.includes('vimeo.com')) {
                const vimeoId = url.split('/').pop();
                return `<iframe src="https://player.vimeo.com/video/${vimeoId}?autoplay=1" allowfullscreen></iframe>`;
            } else {
                return `<video controls autoplay style="width: 100%; height: 100%;"><source src="${url}" type="video/mp4">Your browser does not support the video tag.</video>`;
            }
            
            return `<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #f1f5f9;">
                <p>Unable to play this video format. <a href="${url}" target="_blank" style="color: #3b82f6;">Open in new tab</a></p>
            </div>`;
        }

        // Initialize lectures on page load
        function initializeLectures() {
            displayLectures();
            updateSubjectFilter();
        }

        // Add event listener for modal close on background click and ESC key
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('videoPlayerModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeVideoPlayer();
                    }
                });
            }
            
            // Close modal with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal && modal.style.display === 'flex') {
                    closeVideoPlayer();
                }
            });
        });

        // Study Material Functions
        function initializeStudyMaterial() {
            showNotification('Study Materials loaded! üìö', 'success');
        }

        function downloadMaterial(materialId) {
            const materials = {
                'math-pyqs': 'Mathematics Previous Year Questions (2019-2024)',
                'physics-pyqs': 'Physics Previous Year Questions (2018-2024)',
                'chemistry-pyqs': 'Chemistry Previous Year Questions (2019-2024)',
                'programming-assignments': 'Programming Assignments - Data Structures & Algorithms',
                'statistics-assignments': 'Statistics Assignments - Probability & Regression',
                'lab-assignments': 'Laboratory Assignments - Physics & Chemistry'
            };
            
            const materialName = materials[materialId];
            showNotification(`Downloading: ${materialName} üì•`, 'info');
            
            // Simulate download process
            setTimeout(() => {
                showNotification(`Download complete: ${materialName} ‚úÖ`, 'success');
            }, 1500);
        }

        function viewMaterial(materialId) {
            const materials = {
                'math-pyqs': 'Mathematics Previous Year Questions (2019-2024)',
                'physics-pyqs': 'Physics Previous Year Questions (2018-2024)',
                'chemistry-pyqs': 'Chemistry Previous Year Questions (2019-2024)',
                'programming-assignments': 'Programming Assignments - Data Structures & Algorithms',
                'statistics-assignments': 'Statistics Assignments - Probability & Regression',
                'lab-assignments': 'Laboratory Assignments - Physics & Chemistry'
            };
            
            const materialName = materials[materialId];
            showNotification(`Opening preview: ${materialName} üëÅ`, 'info');
            
            // Simulate preview loading
            setTimeout(() => {
                showNotification(`Preview ready: ${materialName} üìñ`, 'success');
            }, 1000);
        }

        // Search functionality
        const searchContainer = document.querySelector('.search-container');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('searchResults');

        // Search data - all tools, simulations, and lectures
        const searchData = [
            { name: 'Calculator', type: 'tool', description: 'Advanced calculator with trigonometric functions' },
            { name: 'Timer', type: 'tool', description: 'Study timer with hours, minutes, and seconds' },
            { name: 'Notepad', type: 'tool', description: 'Take notes with file management' },
            { name: 'Study Simulations', type: 'section', description: 'Engineering Graphics & Drafting simulation' },
            { name: 'Lectures', type: 'section', description: 'Educational video lectures and courses' },
            { name: 'Study Material', type: 'section', description: 'PYQs, assignments, and study resources' },
            { name: 'Engineering Graphics', type: 'simulation', description: 'Interactive diagonal scales and drafting tutorial' },
            { name: 'Diagonal Scales', type: 'simulation', description: 'Learn to construct and use diagonal scales for precise measurements' },
            { name: 'Drafting Tools', type: 'simulation', description: 'Engineering drawing tools and measurement techniques' },
            { name: 'Scale Reading', type: 'simulation', description: 'Practice reading measurements from diagonal scales' },
            { name: 'Introduction to Programming', type: 'lecture', description: 'Learn the basics of programming languages' },
            { name: 'Data Structures & Algorithms', type: 'lecture', description: 'Master data structures and algorithmic thinking' },
            { name: 'Calculus Fundamentals', type: 'lecture', description: 'Comprehensive calculus course from basics to advanced' },
            { name: 'Physics: Mechanics', type: 'lecture', description: 'Classical mechanics and motion principles' },
            { name: 'Chemistry: Organic Compounds', type: 'lecture', description: 'Study organic chemistry and molecular structures' },
            { name: 'History of Science', type: 'lecture', description: 'Explore the evolution of scientific thought' },
            { name: 'Mathematics PYQs', type: 'material', description: 'Previous year questions for mathematics (2019-2024)' },
            { name: 'Physics PYQs', type: 'material', description: 'Previous year questions for physics (2018-2024)' },
            { name: 'Chemistry PYQs', type: 'material', description: 'Previous year questions for chemistry (2019-2024)' },
            { name: 'Programming Assignments', type: 'material', description: 'Data structures and algorithms assignments' },
            { name: 'Statistics Assignments', type: 'material', description: 'Probability and regression analysis assignments' },
            { name: 'Lab Assignments', type: 'material', description: 'Physics and chemistry laboratory experiments' }
        ];

        // Show search results
        function showSearchResults(results) {
            // Clear previous results first
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = '<div class="search-result-item no-results">No results found</div>';
            } else {
                searchResults.innerHTML = results.map(item => `
                    <div class="search-result-item" onclick="navigateToItem('${item.type}', '${item.name}')">
                        <div class="search-result-title">${highlightMatch(item.name, searchInput.value)}</div>
                        <div class="search-result-description">${item.description}</div>
                        <div class="search-result-type">${item.type}</div>
                    </div>
                `).join('');
            }
            
            // Show results with smooth transition
            searchResults.style.display = 'block';
            searchResults.style.opacity = '1';
        }

        // Highlight matching text in search results
        function highlightMatch(text, query) {
            if (!query || query.trim() === '') return text;
            
            const regex = new RegExp(`(${query.trim()})`, 'gi');
            return text.replace(regex, '<mark style="background: rgba(79, 70, 229, 0.3); color: #f1f5f9; padding: 0.1rem 0.2rem; border-radius: 0.2rem;">$1</mark>');
        }

        // Hide search results
        function hideSearchResults() {
            searchResults.style.opacity = '0';
            setTimeout(() => {
                searchResults.style.display = 'none';
                searchResults.innerHTML = '';
            }, 150); // Small delay for smooth transition
        }

        // Navigate to search result
        function navigateToItem(type, name) {
            hideSearchResults();
            searchInput.value = '';
            // Don't hide the search container - keep it visible

            switch (type) {
                case 'tool':
                    if (name === 'Calculator') showTool('calculator');
                    else if (name === 'Timer') showTool('timer');
                    else if (name === 'Notepad') showTool('notepad');
                    break;
                case 'section':
                    if (name === 'Study Simulations') showTool('simulations');
                    else if (name === 'Lectures') showTool('lectures');
                    else if (name === 'Study Material') showTool('study-material');
                    break;
                case 'simulation':
                case 'lecture':
                case 'material':
                    // For simulations and lectures, show the parent section
                    if (type === 'simulation') showTool('simulations');
                    else if (type === 'lecture') showTool('lectures');
                    else if (type === 'material') showTool('study-material');
                    break;
            }
        }

        // Search input event listener
        searchInput.addEventListener('input', function() {
            console.log('Search input detected:', this.value); // Debug log
            const query = this.value.toLowerCase().trim();
            
            // Get all tool cards
            const toolCards = document.querySelectorAll('.tool-card');
            
            if (query === '') {
                // Show all tool cards and hide search results dropdown
                hideSearchResults();
                toolCards.forEach(card => {
                    card.style.display = 'block';
                    // Reset any highlighted text
                    resetCardHighlight(card);
                });
                return;
            }

            // Hide the dropdown search results since we're filtering cards directly
            hideSearchResults();
            
            let hasVisibleCards = false;

            // Filter tool cards based on search query
            toolCards.forEach(card => {
                const cardTitle = card.querySelector('h3').textContent.toLowerCase();
                const cardDescription = card.querySelector('p').textContent.toLowerCase();
                
                if (cardTitle.includes(query) || cardDescription.includes(query)) {
                    // Show matching card and highlight text
                    card.style.display = 'block';
                    highlightCardText(card, query);
                    hasVisibleCards = true;
                } else {
                    // Hide non-matching card
                    card.style.display = 'none';
                }
            });

            // If no cards match, show a "no results" message in the main area
            if (!hasVisibleCards) {
                showNoResultsMessage();
            } else {
                hideNoResultsMessage();
            }
        });

        // Function to highlight matching text in tool cards
        function highlightCardText(card, query) {
            const title = card.querySelector('h3');
            const description = card.querySelector('p');
            
            // Store original text if not already stored
            if (!title.dataset.originalText) {
                title.dataset.originalText = title.textContent;
            }
            if (!description.dataset.originalText) {
                description.dataset.originalText = description.textContent;
            }
            
            // Highlight matching text
            const regex = new RegExp(`(${query})`, 'gi');
            title.innerHTML = title.dataset.originalText.replace(regex, '<mark style="background: rgba(79, 70, 229, 0.4); color: #f1f5f9; padding: 0.1rem 0.2rem; border-radius: 0.2rem;">$1</mark>');
            description.innerHTML = description.dataset.originalText.replace(regex, '<mark style="background: rgba(79, 70, 229, 0.4); color: #f1f5f9; padding: 0.1rem 0.2rem; border-radius: 0.2rem;">$1</mark>');
        }

        // Function to reset card highlighting
        function resetCardHighlight(card) {
            const title = card.querySelector('h3');
            const description = card.querySelector('p');
            
            if (title.dataset.originalText) {
                title.innerHTML = title.dataset.originalText;
            }
            if (description.dataset.originalText) {
                description.innerHTML = description.dataset.originalText;
            }
        }

        // Function to show "no results" message
        function showNoResultsMessage() {
            let noResultsDiv = document.getElementById('noResultsMessage');
            if (!noResultsDiv) {
                noResultsDiv = document.createElement('div');
                noResultsDiv.id = 'noResultsMessage';
                noResultsDiv.style.cssText = `
                    text-align: center;
                    padding: 3rem;
                    color: rgba(241, 245, 249, 0.6);
                    font-size: 1.2rem;
                    grid-column: 1 / -1;
                `;
                noResultsDiv.innerHTML = 'üîç No tools found matching your search';
                document.getElementById('toolsGrid').appendChild(noResultsDiv);
            }
            noResultsDiv.style.display = 'block';
        }

        // Function to hide "no results" message
        function hideNoResultsMessage() {
            const noResultsDiv = document.getElementById('noResultsMessage');
            if (noResultsDiv) {
                noResultsDiv.style.display = 'none';
            }
        }

        // Ensure search input can receive focus when clicked
        searchInput.addEventListener('click', function() {
            this.focus();
        });

        // Show search results when search input gets focus and has content
        searchInput.addEventListener('focus', function() {
            console.log('Search input focused'); // Debug log
            const query = this.value.toLowerCase().trim();
            if (query !== '') {
                // Trigger the input event to refresh the card filtering
                this.dispatchEvent(new Event('input'));
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            const searchInput = document.getElementById('search-input');
            
            // Ctrl+K to focus search (only if search input is not already focused)
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                searchInput.focus();
                return;
            }
            
            // Escape to clear search and reset cards (only if search input is focused)
            if (e.key === 'Escape' && document.activeElement === searchInput) {
                searchInput.value = '';
                // Reset all cards to visible
                const toolCards = document.querySelectorAll('.tool-card');
                toolCards.forEach(card => {
                    card.style.display = 'block';
                    resetCardHighlight(card);
                });
                hideNoResultsMessage();
                searchInput.blur(); // Remove focus from search input
                return;
            }
        });

        // Close search results when clicking outside (no longer needed for dropdown, but keep for consistency)
        document.addEventListener('click', function(e) {
            if (!searchContainer.contains(e.target)) {
                hideSearchResults();
            }
        });

        // Prevent search container from closing when clicking inside it
        searchContainer.addEventListener('click', function(e) {
            e.stopPropagation();
        });
    </script>
</body>
</html>